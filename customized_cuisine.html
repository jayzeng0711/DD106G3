<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="./images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="./css/customized_cuisine.css">
    <script src="./jquery/jquery.min.js"></script>
    <script src="./jquery/jquery-ui.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>

    <title>客製化料理</title>

</head>

<body>
    @@include('./layout/header.html')

    <div class="container">
        @@include('./layout/h1_title.html')
        <main>
            <div class="intro">
                <p>
                    修旦幾勒，已經登入了嗎？沒有登入的話就沒辦法記錄料理囉
                </p>
                <p>
                    只能選擇菜單上的菜色讓您感到了無新意？<br>
                    這裡歡迎您盡情發揮想像，來創造獨一無二的客製化料理吧！
                </p>
                <p>沒有食材可以製作料理嗎？<br>
                    趕快去GET到尚青ㄟ海鮮吧！
                </p>
                <a href="./game.html">
                    <button>抓海鮮去囉~</button>
                </a>
            </div>

            <div class="upper">
                <h3>
                    STEP 1： 選擇一個喜歡的海鮮
                </h3>
                <section class="choose-fish">

                    <div class="note selected-fish">
                        <div class="note-content">
                            <span>章魚</span>
                            <span>價格：NT$800元</span>
                        </div>

                        <div class="fish-pic">
                            <img src="./images/seafood3.svg" alt="octopus">
                        </div>
                    </div>
                    <div class="note">
                        <div class="note-content">
                            <span>胭脂蝦</span>
                            <span>價格：NT$800元</span>
                        </div>
                        <div class="fish-pic">
                            <img src="./images/seafood8.svg" alt="shrimp">
                        </div>
                    </div>
                    <div class="note">
                        <div class="note-content">
                            <span>鰈魚</span>
                            <span>價格：NT$800元</span>
                        </div>
                        <div class="fish-pic">
                            <img src="./images/seafood4.svg" alt="flounder">
                        </div>
                    </div>
                </section>
            </div>

            <section class="paper">
                <div class="center" id="center">
                    <div class="side-left">
                        <div class="food-display" id="pin">
                            <div class="ingret_pos">
                                <img class="in_pic" src="" alt="">
                            </div>
                            <div class="ingret_pos">
                                <img class="in_pic" src="" alt="">
                            </div>
                            <div class="ingret_pos">
                                <img class="in_pic" src="" alt="">
                            </div>
                            <img src="./images/seafood3.svg" class="base" alt="" srcset="">
                        </div>
                    </div>

                    <div class="side-right">
                        <div class="for-phone">
                            <div class="list-block">
                                <ul class="tab-list">
                                    <li>
                                        <a href="#c-fish" data-target="tab1" class="tab -on">捕獲食材</a>
                                    </li>
                                    <li>
                                        <a href="#c-cook" data-target="tab2" class="tab">烹調方式</a>
                                    </li>
                                    <li>
                                        <a href="#c-element" data-target="tab3" class="tab">配料選擇</a>
                                    </li>
                                </ul>
                            </div>

                            <div class="tab-contents">
                                <div id="c-fish" class="tab tab1 -on">
                                    <div class="cabinet-top">
                                        <ul>
                                            <li class="tab_fish selected">
                                                <figure>
                                                    <figcaption>
                                                        <p>章魚</p>
                                                    </figcaption>
                                                    <img src="./images/seafood3.svg" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_fish">
                                                <figure>
                                                    <figcaption>
                                                        <p>胭脂蝦</p>
                                                    </figcaption>
                                                    <img src="./images/seafood8.svg" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_fish">
                                                <figure>
                                                    <figcaption>
                                                        <p>鰈魚</p>
                                                    </figcaption>
                                                    <img src="./images/seafood4.svg" alt="">
                                                </figure>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="cabinet-bottom">
                                        <ul>
                                            <li>
                                                <figure>
                                                    <figcaption>
                                                        <p>奶油</p>
                                                    </figcaption>
                                                    <img src="./images/seafood8.svg" alt="">
                                                </figure>
                                            </li>
                                            <li>
                                                <figure>
                                                    <figcaption>
                                                        <p>奶油</p>
                                                    </figcaption>
                                                    <img src="./images/seafood3.svg" alt="">
                                                </figure>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div id="c-cook" class="tab tab2">
                                    <div class="cabinet-top">
                                        <ul class="tab_cook" style="display: flex;">
                                            <li id="tab_cook1">
                                                煮湯
                                            </li>
                                            <li id="tab_cook2">
                                                蒸
                                            </li>
                                            <li id="tab_cook3">
                                                烤
                                            </li>
                                        </ul>
                                        <ul class="tab_cook" style="display: none;">
                                            <li id="tab_cook4">
                                                炒
                                            </li>
                                            <li id="tab_cook5">
                                                炸
                                            </li>
                                            <li id="tab_cook6">
                                                涼拌
                                            </li>
                                        </ul>
                                        <ul class="tab_cook" style="display: none;">
                                            <li id="tab_cook7">
                                                煮清湯
                                            </li>
                                            <li id="tab_cook8">
                                                生吃
                                            </li>
                                            <li id="tab_cook9">
                                                烤
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="cabinet-bottom">
                                        <p>
                                            目前選擇海鮮：<span class="now-fish"></span>
                                        </p><br>
                                        <p>
                                            目前選擇烹調方式：<span class="now-type"></span>
                                        </p>

                                    </div>
                                </div>

                                <div id="c-element" class="tab tab3">
                                    <div class="cabinet-top">
                                        <ul>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>奶油</p>
                                                    </figcaption>
                                                    <img src="./images/butter.png" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>芥末</p>
                                                    </figcaption>
                                                    <img src="./images/wasabi.png" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>金箔</p>
                                                    </figcaption>
                                                    <img src="./images/gold.png" alt="">
                                                </figure>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="cabinet-bottom">
                                        <ul>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>迷迭香</p>
                                                    </figcaption>
                                                    <img src="./images/rosemary.png" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>辣椒</p>
                                                    </figcaption>
                                                    <img src="./images/chili.png" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>檸檬</p>
                                                    </figcaption>
                                                    <img src="./images/lemon.png" alt="">
                                                </figure>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="choose-cook">
                            <h3>STEP 2： 選擇一個海鮮的烹調方式</h3>
                            <div class="choose-cook">
                                <ul class="list-of-cook">
                                    <li class="cook-type oct" id="cook1">煮湯</li>
                                    <li class="cook-type oct" id="cook2">蒸</li>
                                    <li class="cook-type oct" id="cook3">烤</li>
                                </ul>
                                <ul class="list-of-cook" style="display: none;">
                                    <li class="cook-type shr1" id="cook4">炒</li>
                                    <li class="cook-type shr2" id="cook5">炸</li>
                                    <li class="cook-type shr3" id="cook6">涼拌</li>
                                </ul>
                                <ul class="list-of-cook" style="display: none;">
                                    <li class="cook-type flo1" id="cook7">煮清湯</li>
                                    <li class="cook-type flo2" id="cook8">生吃</li>
                                    <li class="cook-type flo3" id="cook9">烤</li>
                                </ul>
                            </div>
                        </div>

                        <div class="choose-element">
                            <h3>STEP 3： 選擇想要配料，依喜好擺成自己喜歡的樣子<br>最多選三樣<span id="reset"></span></h3>
                            <div class="choose-ingredient">
                                <ul>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>奶油</p>
                                            </figcaption>
                                            <img src="./images/butter.png" alt="">
                                        </figure>
                                    </li>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>芥末</p>
                                            </figcaption>
                                            <img src="./images/wasabi.png" alt="">
                                        </figure>
                                    </li>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>金箔</p>
                                            </figcaption>
                                            <img src="./images/gold.png" alt="">
                                        </figure>
                                    </li>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>迷迭香</p>
                                            </figcaption>
                                            <img src="./images/rosemary.png" alt="">
                                        </figure>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    var num = 0;

                    $(document).ready(function () {

                        // alert($('.ingret').length);
                        for (let i = 0; i < $('.ingret').length; i++) {
                            $(".ingret").eq(i).click(function () {
                                var in_src = $(this).children().children("img").attr("src");
                                // alert(in_src);
                                $(".in_pic").eq(num).attr("src", in_src);
                                num++;

                                if (num > 3) {
                                    alert("最多只能選三個喔!!!");
                                }
                            })
                        }

                        for (let i = 0; i < $('.tab_in').length; i++) {
                            $(".tab_in").eq(i).click(function () {
                                var in_src = $(this).children().children("img").attr("src");
                                
                                $(".in_pic").eq(num).attr("src", in_src);
                                num++;

                                if (num > 3) {
                                    alert("最多只能選三個喔!!!");
                                }
                            })
                        }
                    });

                    $(".ingret_pos").draggable({
                        containment: "parent",
                        scroll: false
                    });

                    var arr = [];
                    var change = document.querySelectorAll(".in_pic");
                    for (let i = 0; i < change.length; i++) {
                        // alert(change.length);
                        //將配料加到圖上
                        change[i].addEventListener("click", function (e) {
                            // alert(arr.indexOf(this));
                            if (arr.indexOf(this) == -1) {
                                arr.push(this);
                            }
                        })

                        // 配料重置
                        $("#reset").click(function(){
                            num = 0;
                            $(".in_pic").attr("src", "");
                        })   
                    }
                </script>


                <form action="">
                    <h3>STEP 4： 為您的料理取個名字並加入菜單，你就可以在預約時點到這個專屬料理囉~</h3>
                    <div class="food-info">
                        <label for="">這道菜的名字是</label>
                        <span>此項必填</span>
                        <input type="text" placeholder="名字最長十個字~" maxlength="10">

                    </div>
                    <div class="food-info">
                        <label for="">關於這道菜，我想說...</label>
                        <textarea name="" cols="30" rows="1" placeholder="輸入文字吧~"></textarea>
                    </div>
                    <div class="form-control">
                        <h3>
                            STEP 5：只有自己吃到沒意思？就是要炫料理？快快參加美食大賽秀一波YO
                        </h3>
                        <button type="button" class="to_lightbox">完成料理</button>
                    </div>
                </form>
            </section>

            <div class="overlay">
                <article>
                    <h1>這是 Modal 裡的標題</h1>
                    <p>這是 Modal 段落</p>
                    <div class="close"></div>
                    <a href="">
                        <input type="submit" value="前往美食大賽">
                    </a>

                </article>
            </div>

        </main>
        @@include('./layout/reboot.html')
    </div>

    <footer> @@include('./layout/foot.html')</footer>
    @@include('./all_js.html')
    <script>
        // 手機用版面
        $(function () {
            $("a.tab").on("click", function (e) {
                e.preventDefault();

                /* 將頁籤列表移除所有 -on，再將指定的加上 -on */
                $(this).closest("ul").find("a.tab").removeClass("-on");
                $(this).addClass("-on");

                /* 找到對應的頁籤內容，加上 -on 來顯示 */
                $(".tab-contents div.tab").removeClass("-on");
                $(".tab-contents div.tab." + $(this).attr("data-target")).addClass("-on");
            });
        });
    </script>
    <script>
        // =================海鮮和烹調的切換
        // 選海鮮，被選擇的海鮮會有紅圈，原本被選擇的烹調方式會恢復正常
        $(".fish-pic, .note-content").on("click", function () {
            $(".note").removeClass("selected-fish");
            $(this.parentNode).addClass("selected-fish");
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
        });
        $(".tab_fish").on("click", function () {
            $(".tab_fish").removeClass("selected");
            $(this).addClass("selected");
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
        });
        //桌機版的海鮮與手機版連動
        for (let i = 0; i < $(".fish-pic").length; i++) {
            $(".fish-pic")[i].addEventListener('click', function () {
                for (let j = 0; j < $(".tab_fish").length; j++) {
                    if (j == i) {
                        $(".tab_fish")[j].classList.add("selected");
                    } else {
                        $(".tab_fish")[j].classList.remove("selected");
                    }
                }
            });
        }
        for (let i = 0; i < $(".tab_fish").length; i++) {
            $(".tab_fish")[i].addEventListener('click', function () {
                for (let j = 0; j < $(".note").length; j++) {
                    if (j == i) {
                        $(".note")[j].classList.add("selected-fish");
                    } else {
                        $(".note")[j].classList.remove("selected-fish");
                    }
                }
            });
        }

        //點海鮮圖改預覽圖
        $(".note img").click(function () {
            let src = $(this).attr('src');
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
        });
        //點海鮮文字改預覽圖
        $(".note-content").click(function () {
            let src = $(this).next().children().attr('src');
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
        });

        $(".note").click(function () {
            let src = $(this).child().attr('src');
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
        });
        //點手機海鮮可以改預覽圖
        $(".tab_fish").click(function () {
            let src = $(this).children().children("img").attr('src');
            $("#pin img.base").attr("src", src);
        });

        // 選了海鮮後會更換烹調
        let s_note = document.getElementsByClassName("note");
        let cookList = document.getElementsByClassName("list-of-cook");
        // alert(s_note.length);
        // alert(cookList.length);
        for (let i = 0; i < s_note.length; i++) {
            s_note[i].addEventListener('click', function () {
                for (let j = 0; j < cookList.length; j++) {
                    if (j == i) {
                        cookList[j].style.display = "flex";
                    } else {
                        cookList[j].style.display = "none";
                    }
                }
                let src = $(this).children().children('img.base').attr('src');
                $("#pin img").attr("src", src);
            })

        };

        let tf_select = document.getElementsByClassName("tab_fish");
        let tc_select = document.getElementsByClassName("tab_cook");

        for (let i = 0; i < tf_select.length; i++) {

            tf_select[i].addEventListener('click', function () {
                for (let j = 0; j < tc_select.length; j++) {
                    if (j == i) {
                        tc_select[j].style.display = "flex";
                    } else {
                        tc_select[j].style.display = "none";
                    }
                }
            })
        };

        // 點烹調方式改預覽圖
        $("#cook1").click(function () {
            src = "./images/cook1.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook1").addClass("selected");
            $("#tab_cook1").addClass("selected");
        });
        $("#tab_cook1").click(function () {
            src = "./images/cook1.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook1").addClass("selected");
            $("#tab_cook1").addClass("selected");
        });

        $("#cook2").click(function () {
            src = "./images/cook2.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook2").addClass("selected");
            $("#tab_cook2").addClass("selected");
        });
        $("#tab_cook2").click(function () {
            src = "./images/cook2.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#tab_cook2").addClass("selected");
            $("#cook2").addClass("selected");
        });

        $("#cook3").click(function () {
            src = "./images/cook3.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook3").addClass("selected");
            $("#tab_cook3").addClass("selected");
        });
        $("#tab_cook3").click(function () {
            src = "./images/cook3.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook3").addClass("selected");
            $("#tab_cook3").addClass("selected");
        });

        $("#cook4").click(function () {
            src = "./images/cook4.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook4").addClass("selected");
            $("#tab_cook4").addClass("selected");
        });
        $("#tab_cook4").click(function () {
            src = "./images/cook4.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook4").addClass("selected");
            $("#tab_cook4").addClass("selected");
        });

        $("#cook5").click(function () {
            src = "./images/cook5.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook5").addClass("selected");
            $("#tab_cook5").addClass("selected");
        });
        $("#tab_cook5").click(function () {
            src = "./images/cook5.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook5").addClass("selected");
            $("#tab_cook5").addClass("selected");
        });

        $("#cook6").click(function () {
            src = "./images/cook6.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook6").addClass("selected");
            $("#tab_cook6").addClass("selected");
        });
        $("#tab_cook6").click(function () {
            src = "./images/cook6.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook6").addClass("selected");
            $("#tab_cook6").addClass("selected");
        });

        $("#cook7").click(function () {
            src = "./images/cook7.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook7").addClass("selected");
            $("#tab_cook7").addClass("selected");
        });
        $("#tab_cook7").click(function () {
            src = "./images/cook7.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook7").addClass("selected");
            $("#tab_cook7").addClass("selected");
        });

        $("#cook8").click(function () {
            src = "./images/cook8.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook8").addClass("selected");
            $("#tab_cook8").addClass("selected");
        });
        $("#tab_cook8").click(function () {
            src = "./images/cook8.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook8").addClass("selected");
            $("#tab_cook8").addClass("selected");
        });

        $("#cook9").click(function () {
            src = "./images/cook1.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook9").addClass("selected");
            $("#tab_cook9").addClass("selected");
        });
        $("#tab_cook9").click(function () {
            src = "./images/cook1.png";
            $("#pin img.base").attr("src", src);
            $(".cook-type").removeClass("selected");
            $(".tab_cook li").removeClass("selected");
            $("#cook9").addClass("selected");
            $("#tab_cook9").addClass("selected");
        });
    </script>
    <script>
        // 取消srollmagic
        $(document).ready(function () {

            var tooSmall = false;
            var controller = null;
            var maxWidth = 767; // or whatever your max width is

            if ($(window).width() > maxWidth) {
                tooSmall = true;
            }

            function initScrollMagic() {
                $('body').scrollTop(0);
                controller = new ScrollMagic.Controller();
                // add your ScrollMagic scene goodness here
                // var controller = new ScrollMagic.Controller();
                var scene = new ScrollMagic.Scene({
                        triggerElement: "#center",
                        triggerHook: 0,
                        duration: 150,
                    })
                    .setPin("#pin")
                    .addIndicators({
                        name: "1 (duration: 170)"
                    }).addTo(controller);
            }

            if (!tooSmall) {
                initScrollMagic();
            }

            // part of the problem is that window resizes can trigger multiple times as the events fire rapidly
            // this solution prevents the controller from being initialized/destroyed more than once
            $(window).resize(function () {
                var wWidth = $(window).width();
                if (wWidth < maxWidth) {
                    if (controller !== null && controller !== undefined) {
                        // completely destroy the controller
                        controller = controller.destroy(true);
                        // if needed, use jQuery to manually remove styles added to DOM elements by GSAP etc. here
                    }
                } else if (wWidth >= maxWidth) {
                    if (controller === null || controller === undefined) {
                        // reinitialize ScrollMagic only if it is not already initialized
                        initScrollMagic();
                    }
                }
            });

            var wWidth = $(window).width();
            if (wWidth < maxWidth) {
                if (controller !== null && controller !== undefined) {
                    controller = controller.destroy(true);
                }
            } else if (wWidth >= maxWidth) {
                if (controller === null || controller === undefined) {
                    initScrollMagic();
                }
            }

        });
    </script>
    <script>
        $(function () {

            // 開啟彈跳視窗
            $("button.to_lightbox").on("click", function () {
                $(".overlay").addClass("-on");
            });
            $(".close").on("click", function () {
                $(".overlay").addClass("-opacity-zero");

                // 設定隔一秒後，移除相關 class
                setTimeout(function () {
                    $(".overlay").removeClass("-on -opacity-zero");
                }, 1000);
            });
        });
    </script>
    <script src="./js/customized_cuisine.js"></script>
</body>

</html>