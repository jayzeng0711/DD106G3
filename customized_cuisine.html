<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="./images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="./css/customized_cuisine.css">
    <title>客製化料理</title>
</head>

<body>
    @@include('./layout/header.html')

    <div class="container">

        <div class="attn on">
            <div class="people"></div>
            <div class="talking-here">
                <!-- 有玩遊戲、沒有登入 -->
                <div class="talk act1 on"></div>
                <div class="talk act2"></div>
                <div class="talk act3"></div>
                <div class="talk act4"></div>

                <!-- 沒有海鮮就進入頁面 -->
                <div class="talk no-fish1"></div>
                <div class="talk no-fish2"></div>
            </div>

        </div>


        <main>
            @@include('./layout/h1_title.html')
            <!-- <div class="intro">
                <p>
                    只能選擇菜單上的菜色讓您感到了無新意？<br>
                    這裡歡迎您盡情發揮想像，來創造獨一無二的客製化料理吧！
                </p>
            </div> -->

            <div class="upper">
                <h3>
                    STEP 1： 選擇一個喜歡的海鮮
                </h3>
                <section class="choose-fish">
                    <div class="fish-select-wrap">
                        <div class="note selected-fish">
                            <div class="note-content">
                                <span class="fishName"></span>
                                <span class="fishPrice"></span>
                            </div>
                            <div class="fish-pic"></div>
                        </div>
                        <div class="note">
                            <div class="note-content">
                                <span class="fishName"></span>
                                <span class="fishPrice"></span>
                            </div>
                            <div class="fish-pic"></div>
                        </div>
                        <div class="note">
                            <div class="note-content">
                                <span class="fishName"></span>
                                <span class="fishPrice"></span>
                            </div>
                            <div class="fish-pic"></div>
                        </div>
                        <div class="note">
                            <div class="note-content">
                                <span class="fishName"></span>
                                <span class="fishPrice"></span>
                            </div>
                            <div class="fish-pic"></div>
                        </div>
                        <div class="note">
                            <div class="note-content">
                                <span class="fishName"></span>
                                <span class="fishPrice"></span>
                            </div>
                            <div class="fish-pic">

                            </div>
                        </div>
                    </div>
                    <button id="fishL">←</button>
                    <button id="fishR">→</button>
                </section>
            </div>

            <section class="paper">
                <div class="center" id="center">
                    <div class="side-left">
                        <div class="pic"></div>
                        <div class="food-display" id="pin">
                            <div class="move" id="moveleft">◀</div>
                            <div class="move" id="moveright">▶</div>
                            <div class="move" id="movetop">▲</div>
                            <div class="move" id="movebottom">▼</div>
                            <div class="move" id="delete">清空配料</div>
                            <canvas id="canvas" width="400" height="400"> </canvas>
                        </div>

                    </div>

                    <div class="side-right">
                        <div class="for-phone">
                            <div class="list-block">
                                <ul class="tab-list">
                                    <li>
                                        <a href="#c-fish" data-target="tab1" class="tab -on">捕獲食材</a>
                                    </li>
                                    <li>
                                        <a href="#c-cook" data-target="tab2" class="tab">烹調方式</a>
                                    </li>
                                    <li>
                                        <a href="#c-element" data-target="tab3" class="tab">配料選擇</a>
                                    </li>
                                </ul>
                            </div>

                            <div class="tab-contents">
                                <div id="c-fish" class="tab tab1 -on">
                                    <div class="cabinet-top">
                                        <ul class="f-ct">
                                            <li class="tab_fish selected">
                                                <figure>
                                                    <figcaption>
                                                        <p class="tab_fishName"></p>
                                                    </figcaption>
                                                    <img class="tab_fishPic" src="" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_fish">
                                                <figure>
                                                    <figcaption>
                                                        <p class="tab_fishName"></p>
                                                    </figcaption>
                                                    <img class="tab_fishPic" src="" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_fish">
                                                <figure>
                                                    <figcaption>
                                                        <p class="tab_fishName"></p>
                                                    </figcaption>
                                                    <img class="tab_fishPic" src="" alt="">
                                                </figure>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="cabinet-bottom">
                                        <ul class="f-cb">
                                            <li class="tab_fish">
                                                <figure>
                                                    <figcaption>
                                                        <p class="tab_fishName"></p>
                                                    </figcaption>
                                                    <img class="tab_fishPic" src="" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_fish">
                                                <figure>
                                                    <figcaption>
                                                        <p class="tab_fishName"></p>
                                                    </figcaption>
                                                    <img class="tab_fishPic" src="" alt="">
                                                </figure>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div id="c-cook" class="tab tab2">
                                    <div class="cabinet-top">
                                        <ul class="tab_cook" style="display: flex;">
                                            <li id="" class="cook-type-mb">
                                                煮湯
                                            </li>
                                            <li id="" class="cook-type-mb">
                                                蒸
                                            </li>
                                            <li id="" class="cook-type-mb">
                                                烤
                                            </li>
                                        </ul>
                                        <!-- <ul class="tab_cook" style="display: flex;">
                                            <li id="" class="cook-type">
                                                煮湯
                                            </li>
                                            <li id="" class="cook-type">
                                                蒸
                                            </li>
                                            <li id="" class="cook-type">
                                                烤
                                            </li>
                                        </ul>
                                        <ul class="tab_cook" style="display: none;">
                                            <li id="" class="cook-type">
                                                炒
                                            </li>
                                            <li id="" class="cook-type">
                                                炸
                                            </li>
                                            <li id="tab_cook6" class="cook-type">
                                                涼拌
                                            </li>
                                        </ul>
                                        <ul class="tab_cook" style="display: none;">
                                            <li id="tab_cook7" class="cook-type">
                                                煮清湯
                                            </li>
                                            <li id="tab_cook8" class="cook-type">
                                                生吃
                                            </li>
                                            <li id="tab_cook9" class="cook-type">
                                                烤
                                            </li>
                                        </ul> -->
                                    </div>
                                    <div class="cabinet-bottom">
                                        <p>
                                            目前選擇海鮮：<span class="now-fish"></span>
                                        </p><br>
                                        <p>
                                            目前選擇烹調方式：<span class="now-type"></span>
                                        </p>

                                    </div>
                                </div>

                                <div id="c-element" class="tab tab3">
                                    <div class="cabinet-top">
                                        <ul class="ct-in">
                                            <!-- <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>奶油</p>
                                                    </figcaption>
                                                    <img src="./images/butter.png" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>芥末</p>
                                                    </figcaption>
                                                    <img src="./images/wasabi.png" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>金箔</p>
                                                    </figcaption>
                                                    <img src="./images/gold.png" alt="">
                                                </figure>
                                            </li> -->
                                        </ul>
                                    </div>
                                    <div class="cabinet-bottom">
                                        <ul class="cb-in">
                                            <!-- <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>迷迭香</p>
                                                    </figcaption>
                                                    <img src="./images/rosemary.png" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>辣椒</p>
                                                    </figcaption>
                                                    <img src="./images/chili.png" alt="">
                                                </figure>
                                            </li>
                                            <li class="tab_in">
                                                <figure>
                                                    <figcaption>
                                                        <p>檸檬</p>
                                                    </figcaption>
                                                    <img src="./images/lemon.png" alt="">
                                                </figure>
                                            </li> -->
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="choose-cook">
                            <h3>STEP 2： 選擇一個海鮮的烹調方式</h3>
                            <div class="choose-cook">
                                <ul class="list-of-cook">
                                    <li class="cook-type" id="cook1">煮湯</li>
                                    <li class="cook-type" id="cook2">蒸</li>
                                    <li class="cook-type" id="cook3">烤</li>
                                </ul>
                                <!-- <ul class="list-of-cook" style="display: none;">
                                    <li class="cook-type" id="cook4">炒</li>
                                    <li class="cook-type" id="cook5">炸</li>
                                    <li class="cook-type" id="cook6">涼拌</li>
                                </ul>
                                <ul class="list-of-cook" style="display: none;">
                                    <li class="cook-type" id="cook7">煮清湯</li>
                                    <li class="cook-type" id="cook8">生吃</li>
                                    <li class="cook-type" id="cook9">烤</li>
                                </ul> -->
                            </div>
                        </div>

                        <div class="choose-element">
                            <h3>STEP 3： 選擇想要配料，依喜好擺成自己喜歡的樣子<br>最多選三樣</h3>
                            <div class="choose-ingredient">
                                <ul class="ingre-wrap">
                                    <!-- <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>奶油</p>
                                            </figcaption>
                                            <img src="./images/butter.png" alt="">
                                        </figure>
                                    </li>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>芥末</p>
                                            </figcaption>
                                            <img src="./images/wasabi.png" alt="">
                                        </figure>
                                    </li>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>金箔</p>
                                            </figcaption>
                                            <img src="./images/gold.png" alt="">
                                        </figure>
                                    </li>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>迷迭香</p>
                                            </figcaption>
                                            <img src="./images/rosemary.png" alt="">
                                        </figure>
                                    </li>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>辣椒</p>
                                            </figcaption>
                                            <img src="./images/chili.png" alt="">
                                        </figure>
                                    </li>
                                    <li class="ingret">
                                        <figure>
                                            <figcaption>
                                                <p>檸檬</p>
                                            </figcaption>
                                            <img src="./images/lemon.png" alt="">
                                        </figure>
                                    </li> -->
                                </ul>
                                <div class="left-right">
                                    <div id="arrowL">←</div>
                                    <div id="arrowR">→</div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <form action="">
                    <h3>STEP 4： 為您的料理取個名字並加入菜單，你就可以在預約時點到這個專屬料理囉~</h3>
                    <div class="food-info">
                        <label for="">這道菜的名字是</label>
                        <span>◎此項必填</span>
                        <input type="text" placeholder="名字最長十個字~" maxlength="10" id="custoName">

                    </div>
                    <div class="food-info">
                        <label for="">關於這道菜，我想說...</label>
                        <textarea name="" cols="30" rows="1" placeholder="輸入文字吧~" id="content"></textarea>
                    </div>
                    <div class="form-control">
                        <h3>
                            STEP 5：只有自己吃到沒意思？就是要炫料理？快快參加美食大賽秀一波YO
                        </h3>
                        <button type="button" class="to_lightbox">完成料理</button>
                    </div>
                </form>
            </section>

            <div class="overlay">
                <article>
                    <div class="box-title">
                        您已完成料理囉～
                        <img class="close" src="./images/blue-cross-icon.png" alt="">
                    </div>
                    <p>按下確定後也會同時報名美食大賽，趕快去看一看吧！</p>

                    <div class="cancel">取消</div>
                    <div id="download">確定</div>

                    <!-- <a href="./contest.html"><input type="submit" value="確定" id="download"></a> -->
                    <!-- <a href="./contest.html"><input type="submit" value="確定" id="download"></a> -->

                </article>
            </div>

        </main>
        @@include('./layout/reboot.html')
    </div>

    <footer> @@include('./layout/foot.html')</footer>
    @@include('./all_js.html')

    <script src="./jquery/jquery.min.js"></script>

    <script>
        // 手機用版面
        $(function () {
            $("a.tab").on("click", function (e) {
                e.preventDefault();

                /* 將頁籤列表移除所有 -on，再將指定的加上 -on */
                $(this).closest("ul").find("a.tab").removeClass("-on");
                $(this).addClass("-on");

                /* 找到對應的頁籤內容，加上 -on 來顯示 */
                $(".tab-contents div.tab").removeClass("-on");
                $(".tab-contents div.tab." + $(this).attr("data-target")).addClass("-on");
            });
        });
    </script>
    <script>
        // // =================海鮮和烹調的切換
        // // 選海鮮，被選擇的海鮮會有紅圈，原本被選擇的烹調方式會恢復正常
        // $(".fish-pic, .note-content").on("click", function () {
        //     $(".note").removeClass("selected-fish");
        //     $(this.parentNode).addClass("selected-fish");
        //     $(".cook-type").removeClass("selected");
        //     $(".tab_cook li").removeClass("selected");
        //     $(".food-display .pic").remove(); //點海鮮時配料會重置
        // });
        // $(".tab_fish").on("click", function () {
        //     $(".tab_fish").removeClass("selected");
        //     $(this).addClass("selected");
        //     $(".cook-type").removeClass("selected");
        //     $(".tab_cook li").removeClass("selected");
        //     $(".food-display .pic").remove();
        // });
        // //桌機版的海鮮與手機版連動
        // for (let i = 0; i < $(".fish-pic").length; i++) {
        //     $(".fish-pic")[i].addEventListener('click', function () {
        //         for (let j = 0; j < $(".tab_fish").length; j++) {
        //             if (j == i) {
        //                 $(".tab_fish")[j].classList.add("selected");
        //             } else {
        //                 $(".tab_fish")[j].classList.remove("selected");
        //             }
        //         }
        //     });
        // }
        // for (let i = 0; i < $(".tab_fish").length; i++) {
        //     $(".tab_fish")[i].addEventListener('click', function () {
        //         for (let j = 0; j < $(".note").length; j++) {
        //             if (j == i) {
        //                 $(".note")[j].classList.add("selected-fish");
        //             } else {
        //                 $(".note")[j].classList.remove("selected-fish");
        //             }
        //         }
        //     });
        // }

        // //點海鮮圖改預覽圖
        // $(".note img").click(function () {
        //     let src = $(this).attr('src');
        //     $("#pin img.base").attr("src", src);
        //     $(".cook-type").removeClass("selected");
        // });
        // //點海鮮文字改預覽圖
        // $(".note-content").click(function () {
        //     let src = $(this).next().children().attr('src');
        //     $("#pin img.base").attr("src", src);
        //     $(".cook-type").removeClass("selected");
        // });

        // //點手機海鮮可以改預覽圖
        // $(".tab_fish").click(function () {
        //     let src = $(this).children().children("img").attr('src');
        //     $("#pin img.base").attr("src", src);
        // });

        // // 選了海鮮後會更換烹調
        // let s_note = document.getElementsByClassName("note");
        // let cookList = document.getElementsByClassName("list-of-cook");
        // let tf_select = document.getElementsByClassName("tab_fish");
        // let tc_select = document.getElementsByClassName("tab_cook");
        // // alert(s_note.length);
        // // alert(cookList.length);
        // for (let i = 0; i < s_note.length; i++) {
        //     s_note[i].addEventListener('click', function () {
        //         for (let j = 0; j < cookList.length; j++) {
        //             if (j == i) {
        //                 cookList[j].style.display = "flex";
        //                 //確認手機版的烹調方式會跟著改變
        //                 for (let a = 0; a < tc_select.length; a++) {
        //                     if (a == i) {
        //                         tc_select[a].style.display = "flex";
        //                     }
        //                 }
        //             } else {
        //                 cookList[j].style.display = "none";
        //                 for (let a = 0; a < tc_select.length; a++) {
        //                     if (a != i) {
        //                         tc_select[a].style.display = "none";
        //                     }
        //                 }
        //             }
        //         }
        //         let src = $(this).children().children('img.base').attr('src');
        //         $("#pin img").attr("src", src);
        //     })

        // };

        // for (let i = 0; i < tf_select.length; i++) {
        //     tf_select[i].addEventListener('click', function () {
        //         for (let j = 0; j < tc_select.length; j++) {
        //             if (j == i) {
        //                 tc_select[j].style.display = "flex";
        //                 //確認桌機版的烹調方式會跟著改變
        //                 for (let a = 0; a < cookList.length; a++) {
        //                     if (a == i) {
        //                         cookList[a].style.display = "flex";
        //                     }
        //                 }
        //             } else {
        //                 tc_select[j].style.display = "none";
        //                 for (let a = 0; a < cookList.length; a++) {
        //                     if (a != i) {
        //                         cookList[a].style.display = "none";
        //                     }
        //                 }
        //             }
        //         }
        //     })
        // };

        // // 點烹調方式改預覽圖
        // $(".cook-type").click(function (e) {
        //     var str = e.target.id;
        //     str = str.substr(str.length - 1, 1);
        //     src = `./images/cook${str}.png`;
        //     $("#pin img.base").attr("src", src);
        //     $(".cook-type").removeClass("selected");
        //     $(".tab_cook li").removeClass("selected");
        //     $(`#cook${str},#tab_cook${str}`).addClass("selected");
        // });
    </script>
    <script>
        // //獲得海鮮的烹調方式
        // function getFishInfo() {
        //     var xhr2 = new XMLHttpRequest();
        //     xhr2.onload = function () {
        //         if (xhr2.status == 200) {
        //             //modify here
        //             showCook(xhr2.responseText);
        //         } else {
        //             alert(xhr2.status);
        //         }
        //     }
        //     var url = "./php/getFishInfo.php?seafoodName=" + document.getElementById("fishName").innerText;
        //     xhr2.open("get", url, true);
        //     xhr2.send(null);
        // };

        // function getFishInfo2() {
        //     var xhr2 = new XMLHttpRequest();
        //     xhr2.onload = function () {
        //         if (xhr2.status == 200) {

        //             showCook(xhr2.responseText);
        //         } else {
        //             alert(xhr2.status);
        //         }
        //     }
        //     var url = "./php/getFishInfo.php?seafoodName=" + document.getElementById("tabFishName").innerText;
        //     xhr2.open("get", url, true);
        //     xhr2.send(null);
        // };

        // //顯示海鮮的烹調方式
        // function showCook(jsonStr) {
        //     let fish = JSON.parse(jsonStr);
        //     $(".list-of-cook").text("");
        //     for (let c = 0; c < fish.length; c++) {
        //         $(".list-of-cook").append(
        //             `<li class="cook-type" id="${fish[c].seafoodCookPic}">${fish[c].cookName}</li>`);
        //     }
        //     $(".tab_cook").text("");
        //     for (let c = 0; c < fish.length; c++) {
        //         $(".tab_cook").append(
        //             ` <li id="${fish[c].seafoodCookPic}" class="cook-type">${fish[c].cookName}</li>`);
        //     }

        //     //選擇烹調方式，會有紅圈、改變預覽圖
        //     $(".cook-type").click(function () {
        //         $(".cook-type").removeClass("selected");
        //         $(this).addClass("selected");

        //         var str = $(this).attr("id");
        //         cookImgSrc = `./images/${id}`;
        //         addSeafood(cookImgSrc);
        //     });
        // }
    </script>
    <script>
        // 打字效果
        var str = "這位客人，您似乎還沒進行登入";
        var str2 = " 提醒您，在沒有登入的情況下製作料理會無法儲存料理";
        var str3 = "請問要進行登入嗎？";
        // var str4 = "這樣呀...我明白了。祝您有段美好的時光";
        var btny = document.createElement('div');
        btny.textContent = "是";
        btny.setAttribute('class', 'yes');
        var btnn = document.createElement('div');
        btnn.textContent = "我想看其他人的料理";
        btnn.setAttribute('class', 'no');
        var click_next = document.createElement('div');
        click_next.textContent = "click";
        click_next.setAttribute('class', 'click_next');
        var br = document.createElement('br');
        var i = 0,
            j = 0,
            k = 0,
            l = 0;


        function typing() {
            if (i <= str.length) {
                $(".talk")[0].innerHTML = str.slice(0, i++);
                setTimeout('typing()', 100); //遞歸調用
            } else {
                //文字輸入完成後再出現
                $(".talk")[0].appendChild(click_next);
            }
        }

        if ($(".act1").hasClass("on") == 1) {
            setTimeout('typing()', 2500);
        } else if ($(".no-fish1").hasClass("on") == 1) {
            setTimeout('goCatch()', 2500);
        }

        function typing2() {
            if (j <= str2.length) {
                $(".talk")[1].innerHTML = str2.slice(0, j++);
                setTimeout('typing2()', 100);
            } else {
                $(".talk")[1].appendChild(click_next);
            }
        }

        function typing3() {
            if (k <= str3.length) {
                $(".talk")[2].innerHTML = str3.slice(0, k++);
                setTimeout('typing3()', 100);
                if ($(window).width() > 576) {
                    $(".talk")[2].appendChild(btny);
                    $(".talk")[2].appendChild(btnn);
                } else {
                    $(".talk")[2].appendChild(br);
                    $(".talk")[2].appendChild(btny);
                    $(".talk")[2].appendChild(btnn);
                }

            } else {
                //開啟登入燈箱
                $(".yes").click(function () {
                    $('#Login,#Login_back').css('display', 'block');
                    $('#pu_mem_resist_wrap').css('display', 'none');
                    $('#pu_mem_forget_wrap').css('display', 'none');
                    $('#pu_mem_login_wrap').css('display', 'block');
                });
                $(".no").click(function () {
                    //     $(".act3").removeClass("on");
                    //     $(".act4").addClass("on");
                    //     setTimeout('typing4()', 100);
                    $(location).attr("href", "./contest.html");
                });
            }
        }

        // function typing4() {
        //     if (l <= str4.length) {
        //         $(".talk")[3].innerHTML = str4.slice(0, l++);
        //         setTimeout('typing4()', 100);
        //     }
        // }

        $(".talking-here").click(function () {
            if ($(".act1").hasClass("on") == 1) {
                $(".act1").removeClass("on");
                $(".act2").addClass("on");
                setTimeout('typing2()', 300);
            } else if ($(".act2").hasClass("on") == 1) {
                $(".act2").removeClass("on");
                $(".act3").addClass("on");
                setTimeout('typing3()', 300);
                //} else if ($(".act4").hasClass("on") == 1) {
                // $(".attn").delay(3000).fadeOut(1000);
                // $("main").addClass("on");
            } else if ($(".no-fish1").hasClass("on") == 1) {
                $(".no-fish1").removeClass("on");
                $(".no-fish2").addClass("on");
                setTimeout('goCatch2()', 300);
            }
        });

        // 沒有料理時的畫面
        var con = "您目前的海鮮清單空空如也，請先抓取海鮮再來製作料理";
        var con2 = "想抓取海鮮請往這邊";
        var a = 0,
            b = 0;
        var goFish = document.createElement('a');
        goFish.textContent = "前往現撈海鮮";
        goFish.setAttribute('class', 'go-fish');
        goFish.setAttribute('href', './game.html');

        function goCatch() {
            if (a <= con.length) {
                $(".talk")[4].innerHTML = con.slice(0, a++);
                setTimeout('goCatch()', 100);
            } else {
                $(".talk")[4].appendChild(click_next);
            }
        }

        function goCatch2() {
            if (b <= con2.length) {
                $(".talk")[5].innerHTML = con2.slice(0, b++);
                setTimeout('goCatch2()', 100);
                $(".talk")[5].appendChild(goFish);
            }
        }
        
    </script>
    <script src="./js/customized_cuisine.js"></script>
</body>

</html>